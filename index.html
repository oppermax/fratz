<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Valentine's Scavenger Hunt üíï</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(to bottom, #fdf8f5 0%, #faf5f1 100%);
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: #5a4a52;
            letter-spacing: 0.2px;
        }

        /* Floating hearts background */
        @keyframes float {
            0% { 
                opacity: 0.85;
            }
            100% { 
                opacity: 0.85;
            }
        }

        .heart-float {
            position: fixed;
            font-size: 1.2rem;
            pointer-events: none;
            animation: float linear forwards;
            will-change: transform, opacity;
        }

        /* Container */
        .container {
            width: 90%;
            max-width: 520px;
            background: white;
            border-radius: 24px;
            padding: 50px 40px;
            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.05);
            text-align: center;
            position: relative;
            z-index: 10;
            animation: slideIn 0.6s ease;
            border: 1px solid rgba(200, 150, 160, 0.15);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #8b6b76;
            margin-bottom: 16px;
            font-size: 2.8rem;
            font-weight: 700;
            font-family: 'Fredoka', sans-serif;
            letter-spacing: 0px;
            line-height: 1.2;
        }

        h2 {
            color: #8b6b76;
            margin-bottom: 24px;
            font-size: 1.9rem;
            font-weight: 600;
            font-family: 'Fredoka', sans-serif;
            letter-spacing: 0px;
        }

        p {
            color: #8b8080;
            line-height: 1.7;
            margin-bottom: 20px;
            font-size: 1rem;
            font-weight: 400;
            letter-spacing: 0.2px;
        }

        /* ========== STATE 1: COUNTDOWN ========== */
        #countdown-state {
            display: none;
        }

        #countdown-state.active {
            display: block;
        }

        .countdown-timer {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin: 35px 0;
        }

        .time-unit {
            background: #fef5f0;
            color: #8b6b76;
            padding: 22px 16px;
            border-radius: 14px;
            font-size: 1.8rem;
            font-weight: 700;
            border: 1px solid rgba(200, 150, 160, 0.2);
        }

        .time-label {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-top: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #8b8080;
        }

        .wait-message {
            font-size: 1.3rem;
            color: #8b6b76;
            margin-top: 32px;
            animation: pulse 3s infinite;
            font-weight: 500;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ========== STATE 2: SCAVENGER HUNT ========== */
        #hunt-state {
            display: none;
        }

        #hunt-state.active {
            display: block;
        }

        .level-container {
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .level-container.fade-out {
            animation: fadeOut 0.6s ease;
        }

        .question {
            background: #fefbf9;
            color: #7a6b6f;
            padding: 28px;
            border-radius: 14px;
            margin: 28px 0;
            font-size: 1.2rem;
            font-weight: 500;
            border: 1px solid rgba(200, 150, 160, 0.2);
            line-height: 1.6;
        }

        .input-group {
            margin: 28px 0;
        }

        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 14px 16px;
            font-size: 1rem;
            border: 1.5px solid #e8ddd9;
            border-radius: 10px;
            transition: all 0.3s ease;
            margin-bottom: 16px;
            background: #fefbf9;
            color: #5a4a52;
            font-family: 'Outfit', sans-serif;
        }

        input[type="text"]:focus,
        input[type="password"]:focus {
            outline: none;
            border-color: #8b6b76;
            background: white;
            box-shadow: 0 0 0 3px rgba(139, 107, 118, 0.1);
        }

        button {
            background: #c9929d;
            color: white;
            border: none;
            padding: 14px 36px;
            font-size: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            letter-spacing: 0.3px;
        }

        button:hover {
            background: #b8818c;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(139, 107, 118, 0.2);
        }

        button:active {
            transform: translateY(-1px);
        }

        .error-message {
            color: #a87b7b;
            margin-top: 10px;
            font-weight: 500;
            display: none;
            font-size: 0.95rem;
        }

        .error-message.show {
            display: block;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .level-indicator {
            color: #8b8080;
            font-weight: 500;
            margin-bottom: 16px;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ========== STATE 3: GRAND FINALE ========== */
        #finale-state {
            display: none;
        }

        #finale-state.active {
            display: block;
        }

        .romantic-card {
            background: linear-gradient(135deg, #fefbf9 0%, #fef5f0 100%);
            border: 1px solid rgba(200, 150, 160, 0.25);
            border-radius: 20px;
            padding: 44px;
            animation: cardEntrance 0.8s ease;
        }

        @keyframes cardEntrance {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .card-title {
            font-size: 2.4rem;
            color: #8b6b76;
            margin-bottom: 28px;
            font-family: 'Fredoka', sans-serif;
            font-weight: 700;
            letter-spacing: 0px;
        }

        .card-letter {
            text-align: left;
            background: white;
            padding: 28px;
            border-radius: 12px;
            margin: 28px 0;
            line-height: 1.8;
            color: #6b6b6b;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(200, 150, 160, 0.15);
            font-size: 0.98rem;
            letter-spacing: 0.2px;
        }

        .card-letter::-webkit-scrollbar {
            width: 6px;
        }

        .card-letter::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .card-letter::-webkit-scrollbar-thumb {
            background: #c9929d;
            border-radius: 10px;
        }

        .hug-button {
            background: #c9929d;
            padding: 16px 44px;
            font-size: 1rem;
            margin-top: 28px;
            font-weight: 500;
        }

        .hug-button:hover {
            background: #b8818c;
            transform: translateY(-2px);
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .confetti-active {
            animation: confetti-fall 3s ease-out forwards;
        }

        /* Mobile responsiveness */
        @media (max-width: 480px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 1.8rem;
                margin-bottom: 20px;
            }

            h2 {
                font-size: 1.4rem;
            }

            .countdown-timer {
                gap: 10px;
            }

            .time-unit {
                padding: 12px;
                font-size: 1.5rem;
            }

            p {
                font-size: 1rem;
            }

            .question {
                font-size: 1.1rem;
            }

            button {
                padding: 12px 30px;
                font-size: 1rem;
            }

            .card-letter {
                max-height: 250px;
            }
        }

        /* Hide/Show states */
        .hidden {
            display: none !important;
        }

        /* Windows XP Error Modal */
        #xp-error-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .xp-error-window {
            width: 340px;
            background: #ecebeb;
            border: 2px solid;
            border-color: #dfdfdf #808080 #808080 #dfdfdf;
            box-shadow: 1px 1px 0 #ffffff inset, -1px -1px 0 #808080;
            font-family: 'MS Sans Serif', Arial, sans-serif;
            font-size: 11px;
        }

        .xp-title-bar {
            background: linear-gradient(to right, #000080, #1084d7);
            color: white;
            padding: 2px 2px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            font-weight: bold;
        }

        .xp-close-btn {
            background: linear-gradient(135deg, #f0f0f0, #d0d0d0);
            border: 1px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            width: 16px;
            height: 14px;
            padding: 0;
            font-size: 10px;
            color: black;
            cursor: pointer;
        }

        .xp-close-btn:active {
            border-color: #808080 #ffffff #ffffff #808080;
        }

        .xp-error-content {
            padding: 8px;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .xp-error-icon {
            font-size: 32px;
            flex-shrink: 0;
        }

        .xp-error-text {
            flex: 1;
        }

        .xp-error-text p {
            margin: 0 0 4px 0;
            line-height: 1.4;
            color: #000;
        }

        .xp-error-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 4px;
            padding: 4px 8px;
            border-top: 1px solid #c0c0c0;
            background: #f0f0f0;
        }

        .xp-error-buttons button {
            background: linear-gradient(135deg, #f0f0f0, #d0d0d0);
            border: 1px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            padding: 4px 12px;
            font-size: 11px;
            min-width: 50px;
            cursor: pointer;
            color: black;
            font-family: 'MS Sans Serif', Arial, sans-serif;
        }

        .xp-error-buttons button:active {
            border-color: #808080 #ffffff #ffffff #808080;
        }

        /* Windows XP/Fallout Terminal Style */
        #terminal-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        #r-cli-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #2c2c2c;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        /* RStudio-like Interface */
        .rstudio-window {
            width: 95%;
            height: 90vh;
            background: #2c2c2c;
            border: 1px solid #4d4d4d;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
            font-family: 'Courier New', monospace;
        }

        .rstudio-header {
            background: linear-gradient(to bottom, #4a90d9 0%, #3a7bc8 100%);
            color: white;
            padding: 8px 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            font-weight: 600;
            border-bottom: 1px solid #2a6bb0;
        }

        .rstudio-logo {
            font-size: 18px;
        }

        .rstudio-body {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .rstudio-left {
            flex: 1;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #4d4d4d;
        }

        .rstudio-right {
            width: 300px;
            display: flex;
            flex-direction: column;
        }

        .rstudio-panel {
            background: #1e1e1e;
            border-bottom: 1px solid #4d4d4d;
            display: flex;
            flex-direction: column;
        }

        .rstudio-panel-header {
            background: #2c2c2c;
            color: #d4d4d4;
            padding: 6px 12px;
            font-size: 12px;
            border-bottom: 1px solid #4d4d4d;
            font-weight: 600;
        }

        .rstudio-panel-content {
            padding: 12px;
            overflow-y: auto;
            flex: 1;
            font-size: 13px;
            line-height: 1.6;
            color: #d4d4d4;
        }

        .rstudio-console {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .rstudio-console-content {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
            background: #1e1e1e;
            color: #d4d4d4;
            font-size: 13px;
            line-height: 1.6;
        }

        .rstudio-console-content p {
            margin: 0;
            padding: 2px 0;
            color: #d4d4d4;
            font-size: 13px;
        }

        .rstudio-console-content .r-output {
            color: #569cd6;
        }

        .rstudio-console-content .r-error {
            color: #f48771;
        }

        .rstudio-console-content .r-comment {
            color: #6a9955;
        }

        .rstudio-console-input {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background: #1e1e1e;
            border-top: 1px solid #4d4d4d;
        }

        .rstudio-prompt {
            color: #569cd6;
            margin-right: 8px;
            font-weight: bold;
        }

        .rstudio-console-input input {
            flex: 1;
            background: transparent;
            border: none;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            outline: none;
        }

        .rstudio-script {
            flex: 1;
            background: #1e1e1e;
            padding: 12px;
            overflow-y: auto;
            font-size: 13px;
            line-height: 1.6;
            color: #d4d4d4;
        }

        .rstudio-script-line {
            margin: 2px 0;
        }

        .rstudio-script .keyword {
            color: #c586c0;
        }

        .rstudio-script .function {
            color: #dcdcaa;
        }

        .rstudio-script .string {
            color: #ce9178;
        }

        .rstudio-script .number {
            color: #b5cea8;
        }

        .rstudio-script .comment {
            color: #6a9955;
            font-style: italic;
        }

        .rstudio-environment {
            flex: 1;
        }

        .rstudio-env-item {
            padding: 4px 0;
            font-size: 12px;
            color: #d4d4d4;
        }

        .rstudio-env-name {
            color: #569cd6;
            font-weight: 600;
        }

        .rstudio-files {
            flex: 1;
        }

        .rstudio-file-item {
            padding: 4px 0;
            font-size: 12px;
            color: #d4d4d4;
        }

        #maus-pm-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .terminal-window {
            width: 90%;
            max-width: 700px;
            background: #001100;
            border: 3px solid #00ff00;
            font-family: 'Courier New', 'Monaco', monospace;
            color: #00ff00;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5), inset 0 0 20px rgba(0, 0, 0, 0.8);
            text-shadow: 0 0 10px #00ff00;
            max-height: 75vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .terminal-text {
            font-size: 12px;
            line-height: 1.8;
            margin-bottom: 15px;
            letter-spacing: 0.5px;
            font-weight: 400;
            flex-grow: 1;
            overflow-y: auto;
            word-wrap: break-word;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .terminal-text p {
            margin: 0;
            padding: 2px 0;
            color: #00ff00;
            font-size: 12px;
        }

        .terminal-text .username {
            color: #00ff00;
            font-weight: bold;
        }

        .terminal-loading {
            margin: 10px 0;
        }

        .loading-bar-container {
            width: 100%;
            height: 18px;
            border: 1px solid #00ff00;
            background: #000;
            position: relative;
            margin: 8px 0;
            padding: 2px;
        }

        .loading-bar-fill {
            height: 100%;
            background: #00ff00;
            width: 0%;
            animation: loadingProgress 2s linear forwards;
            box-shadow: 0 0 10px #00ff00;
        }

        @keyframes loadingProgress {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        .terminal-status {
            margin-top: 10px;
            font-size: 12px;
            color: #00ff00;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .terminal-input-section {
            margin-top: 10px;
            display: flex;
            align-items: center;
            border-top: 1px solid #00330033;
            padding-top: 10px;
            flex-shrink: 0;
        }

        #terminal-prompt,
        #r-prompt,
        #maus-prompt {
            color: #00ff00;
            margin: 0;
            margin-right: 8px;
            font-size: 12px;
            font-weight: bold;
            flex-shrink: 0;
        }

        #terminal-input,
        #r-input,
        #maus-input {
            flex: 1;
            background: transparent !important;
            border: none !important;
            color: #00ff00 !important;
            font-family: 'Courier New', 'Monaco', monospace !important;
            font-size: 12px !important;
            outline: none !important;
            padding: 0 !important;
            font-weight: 400 !important;
            caret-color: #00ff00 !important;
        }

        /* Scrollbar styling */
        .terminal-text::-webkit-scrollbar {
            width: 8px;
        }

        .terminal-text::-webkit-scrollbar-track {
            background: #001100;
        }

        .terminal-text::-webkit-scrollbar-thumb {
            background: #00ff0055;
            border-radius: 4px;
        }

        .terminal-text::-webkit-scrollbar-thumb:hover {
            background: #00ff00;
        }

        .success-pulse {
            animation: successPulse 0.6s ease;
        }

        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <!-- Terminal Authentication Modal -->
    <div id="terminal-modal" class="hidden">
        <div class="terminal-window">
            <div class="terminal-text" id="terminal-content">
                <p>> initializing authentication sequence...</p>
                <p>> username: <span class="username" id="terminal-username"></span></p>
                <p>> validating credentials...</p>
            </div>
            <div class="terminal-loading" id="terminal-loading-section">
                <div class="loading-bar-container">
                    <div class="loading-bar-fill"></div>
                </div>
            </div>
            <div class="terminal-status" id="terminal-status-section" style="display: none;">
                <p id="terminal-status-text">‚úì authentication successful</p>
            </div>
            <div class="terminal-input-section" id="terminal-input-section" style="display: none;">
                <p id="terminal-prompt">>></p>
                <input 
                    type="text" 
                    id="terminal-input" 
                    autocomplete="off"
                    placeholder=""
                    onkeypress="handleTerminalInput(event)"
                >
            </div>
        </div>
    </div>

    <!-- Maus Package Manager Modal -->
    <div id="maus-pm-modal" class="hidden">
        <div class="terminal-window">
            <div class="terminal-text" id="maus-terminal-content">
                <p style="color: #00ff00;">‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó</p>
                <p style="color: #00ff00;">‚ïë         üê≠ maus package manager    ‚ïë</p>
                <p style="color: #00ff00;">‚ïë         v1.0.0 (heart edition)     ‚ïë</p>
                <p style="color: #00ff00;">‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù</p>
                <p style="color: #00ff00;">type 'help' for commands</p>
            </div>
            <div class="terminal-input-section" id="maus-input-section">
                <p id="maus-prompt">[maus]$ </p>
                <input 
                    type="text" 
                    id="maus-input" 
                    autocomplete="off"
                    placeholder=""
                    onkeypress="handleMausInput(event)"
                >
            </div>
        </div>
    </div>
    <div id="r-cli-modal" class="hidden">
        <div class="rstudio-window">
            <div class="rstudio-header">
                <span class="rstudio-logo">üìä</span>
                <span>RStudio - Love Analytics</span>
            </div>
            <div class="rstudio-body">
                <div class="rstudio-left">
                    <div class="rstudio-panel" style="flex: 1;">
                        <div class="rstudio-panel-header">üíò love_script.R</div>
                        <div class="rstudio-script" id="r-script-content">
                            <div class="rstudio-script-line"><span class="comment"># Welcome to the Love Analytics Challenge! üíï</span></div>
                            <div class="rstudio-script-line"><span class="comment"># Your mission: Analyze our relationship data</span></div>
                            <div class="rstudio-script-line"></div>
                            <div class="rstudio-script-line"><span class="comment"># Step 1: Load the romantic dataset</span></div>
                            <div class="rstudio-script-line"><span class="keyword">library</span>(<span class="string">"love"</span>)</div>
                            <div class="rstudio-script-line"><span class="function">load_heart_data</span>()</div>
                            <div class="rstudio-script-line"></div>
                            <div class="rstudio-script-line"><span class="comment"># Step 2: Explore the relationship patterns</span></div>
                            <div class="rstudio-script-line"><span class="comment"># Hint: What connects two hearts? ü§î</span></div>
                        </div>
                    </div>
                    <div class="rstudio-panel rstudio-console">
                        <div class="rstudio-panel-header">Console</div>
                        <div class="rstudio-console-content" id="r-terminal-content">
                            <p>> <span class="keyword">library</span>(love)</p>
                            <p class="r-comment">‚ú® Welcome to Love Analytics v1.0 ‚ú®</p>
                            <p class="r-comment">üíï Type commands in the console below üíï</p>
                            <p class="r-comment">üí° Hint: Start with load_heart_data()</p>
                        </div>
                        <div class="rstudio-console-input">
                            <span class="rstudio-prompt">></span>
                            <input 
                                type="text" 
                                id="r-input" 
                                autocomplete="off"
                                placeholder=""
                                onkeypress="handleRInput(event)"
                            >
                        </div>
                    </div>
                </div>
                <div class="rstudio-right">
                    <div class="rstudio-panel rstudio-environment">
                        <div class="rstudio-panel-header">Environment</div>
                        <div class="rstudio-panel-content" id="r-environment">
                            <div class="rstudio-env-item">
                                <span class="rstudio-env-name">user</span>: "<span id="r-user-name">maus</span>"
                            </div>
                            <div class="rstudio-env-item">
                                <span class="rstudio-env-name">session</span>: "valentine_2026"
                            </div>
                        </div>
                    </div>
                    <div class="rstudio-panel rstudio-files">
                        <div class="rstudio-panel-header">Files</div>
                        <div class="rstudio-panel-content">
                            <div class="rstudio-file-item">üìÑ love_script.R</div>
                            <div class="rstudio-file-item">üìä heart_data.csv</div>
                            <div class="rstudio-file-item">üíå love_letter.txt</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="xp-error-modal" class="hidden">
        <div class="xp-error-window">
            <div class="xp-title-bar">
                <span>mausbert.exe</span>
                <button class="xp-close-btn" onclick="closeXPError()">√ó</button>
            </div>
            <div class="xp-error-content">
                <div class="xp-error-icon">‚ö†Ô∏è</div>
                <div class="xp-error-text">
                    <p><strong>error 404 mausbert.exe not found</strong></p>
                    <p>the name you entered is not recognized.</p>
                </div>
            </div>
            <div class="xp-error-buttons">
                <button onclick="closeXPError()">OK</button>
            </div>
        </div>
    </div>

    <!-- Floating hearts background -->
    <div id="hearts-container"></div>

    <!-- Main Container -->
    <div class="container">
        <!-- ========== STATE 1: COUNTDOWN ========== -->
        <div id="countdown-state">
            <h1>a special surprise awaits</h1>
            <p>something magical is coming...</p>
            <div class="countdown-timer">
                <div class="time-unit">
                    <div id="days">0</div>
                    <div class="time-label">Days</div>
                </div>
                <div class="time-unit">
                    <div id="hours">0</div>
                    <div class="time-label">Hours</div>
                </div>
                <div class="time-unit">
                    <div id="minutes">0</div>
                    <div class="time-label">Minutes</div>
                </div>
                <div class="time-unit">
                    <div id="seconds">0</div>
                    <div class="time-label">Seconds</div>
                </div>
            </div>
            <div class="wait-message">wait for it...</div>
        </div>

        <!-- ========== STATE 2: SCAVENGER HUNT ========== -->
        <div id="hunt-state">
            <div id="levels-container">
                <!-- Levels will be dynamically inserted here -->
            </div>
        </div>

        <!-- ========== STATE 3: GRAND FINALE ========== -->
        <div id="finale-state">
            <div class="romantic-card">
                <div class="card-title">my dearest</div>
                <div class="card-letter" id="love-letter">
                    <!-- [INSERT YOUR LOVE LETTER HERE] -->
                    <!-- This is where your personal message goes. Replace this placeholder with your heartfelt message. -->
                    <!-- You can use multiple paragraphs, and it will scroll if too long. -->
                </div>
                <button class="hug-button" onclick="sendVirtualHug()">send a virtual hug</button>
            </div>
        </div>
    </div>

    <script>
        // ========== CONFIGURATION SECTION ==========
        // EDIT THIS SECTION WITH YOUR CUSTOM CONTENT

        const CONFIG = {
            // Set the reveal date and time (February 11, 2026, 10:00 AM - already passed for testing)
            revealTime: new Date(2026, 1, 11, 10, 0, 0).getTime(),

            // Levels configuration - Edit passwords and questions here
            levels: [
                {
                    number: 1,
                    question: "hi <3 wie hei√üt du",
                    password: "maus" // Check if input includes "maus"
                }
            ],

            // Love letter - Edit this with your personal message
            loveLetter: `Dear [Name],

I wanted to create something special for you this Valentine's Day. This scavenger hunt was designed with love, with each level representing a moment we share together.

Through these questions, I hope you'll remember why you mean so much to me. You are my greatest treasure, my truest love, and my forever home.

Thank you for being you. Thank you for choosing me.

With all my love,
[Your Name]`
        };

        // ========== END CONFIGURATION SECTION ==========

        let currentLevel = 0;
        let huntInitialized = false;
        let rstudioInstalled = false;
        let username = '';

        // Initialize the page
        function init() {
            // Ensure modals are hidden on init
            document.getElementById('xp-error-modal').classList.add('hidden');
            document.getElementById('terminal-modal').classList.add('hidden');
            
            generateHearts();
            updateState();
            setInterval(updateState, 1000);
            populateLoveLetter();
        }

        // Update state based on current time
        function updateState() {
            const now = new Date().getTime();
            const timeLeft = CONFIG.revealTime - now;

            if (timeLeft > 0) {
                // State 1: Countdown
                showCountdown(timeLeft);
            } else {
                // State 2 & 3: Hunt or Finale
                hideCountdown();
                if (currentLevel < CONFIG.levels.length) {
                    showHunt();
                } else {
                    showFinale();
                }
            }
        }

        // Countdown logic
        function showCountdown(timeLeft) {
            document.getElementById('countdown-state').classList.add('active');
            document.getElementById('hunt-state').classList.remove('active');
            document.getElementById('finale-state').classList.remove('active');

            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

            document.getElementById('days').textContent = String(days).padStart(2, '0');
            document.getElementById('hours').textContent = String(hours).padStart(2, '0');
            document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
        }

        function hideCountdown() {
            document.getElementById('countdown-state').classList.remove('active');
        }

        // Hunt logic
        function showHunt() {
            document.getElementById('hunt-state').classList.add('active');
            document.getElementById('finale-state').classList.remove('active');
            if (!huntInitialized) {
                renderLevel();
                huntInitialized = true;
            }
        }

        function renderLevel() {
            const level = CONFIG.levels[currentLevel];
            const container = document.getElementById('levels-container');
            
            // Special rendering for level 1 (name input only)
            if (currentLevel === 0) {
                container.innerHTML = `
                    <div class="level-container">
                        <div class="question">${level.question}</div>
                        <div class="input-group">
                            <input 
                                type="text" 
                                id="password-input" 
                                onkeypress="handleKeyPress(event)"
                                autocomplete="off"
                            >
                            <div class="error-message" id="error-msg">error 404 mausbert.exe not found</div>
                            <button onclick="checkPassword()">submit answer</button>
                        </div>
                    </div>
                `;
            } else {
                // Regular level rendering
                container.innerHTML = `
                    <div class="level-container">
                        <div class="level-indicator">level ${level.number} / ${CONFIG.levels.length}</div>
                        <h2>level ${level.number}</h2>
                        <div class="question">${level.question}</div>
                        <div class="input-group">
                            <input 
                                type="text" 
                                id="password-input" 
                                placeholder="enter your answer..." 
                                onkeypress="handleKeyPress(event)"
                                autocomplete="off"
                            >
                            <div class="error-message" id="error-msg">incorrect answer. try again!</div>
                            <button onclick="checkPassword()">submit answer</button>
                        </div>
                    </div>
                `;
            }
            document.getElementById('password-input').focus();
        }

        function checkPassword() {
            const input = document.getElementById('password-input').value.toLowerCase().trim();
            const currentLevelConfig = CONFIG.levels[currentLevel];
            
            let isCorrect = false;
            
            // Level 1: Check if input includes "maus"
            if (currentLevel === 0) {
                isCorrect = input.includes(currentLevelConfig.password.toLowerCase());
            } else {
                // Other levels: exact match
                isCorrect = input === currentLevelConfig.password.toLowerCase();
            }

            if (isCorrect) {
                // For level 1, show terminal animation first
                if (currentLevel === 0) {
                    showTerminalAuthentication(input);
                } else {
                    currentLevel++;
                    if (currentLevel < CONFIG.levels.length) {
                        transitionToNextLevel();
                    } else {
                        transitionToFinale();
                    }
                }
            } else {
                showError();
            }
        }

        function showTerminalAuthentication(user) {
            // Store username
            username = user;
            
            // Show terminal modal
            document.getElementById('terminal-modal').classList.remove('hidden');
            document.getElementById('terminal-username').textContent = user;
            
            // Update R user name if element exists
            const rUserElement = document.getElementById('r-user-name');
            if (rUserElement) {
                rUserElement.textContent = user;
            }
            
            // After loading bar completes (2 seconds), show prompt
            setTimeout(() => {
                // Hide loading bar
                document.getElementById('terminal-loading-section').style.display = 'none';
                
                // Show status
                document.getElementById('terminal-status-section').style.display = 'block';
                
                // Show input section after 1 second
                setTimeout(() => {
                    document.getElementById('terminal-input-section').style.display = 'block';
                    document.getElementById('terminal-input').focus();
                }, 1000);
            }, 2000);
        }

        function handleTerminalInput(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('terminal-input').value.toLowerCase().trim();
                const content = document.getElementById('terminal-content');
                
                if (!input) {
                    document.getElementById('terminal-input').value = '';
                    return;
                }
                
                // Add user input to terminal
                const userLine = document.createElement('p');
                userLine.textContent = '>> ' + input;
                userLine.style.color = '#00ff00';
                content.appendChild(userLine);
                
                // Process command
                let response = '';
                let shouldEnter = false;
                
                // Check if it's a maus command
                if (input.startsWith('maus')) {
                    // Extract maus subcommand
                    const mausArgs = input.replace('maus', '').trim().split(' ');
                    const mausCmd = mausArgs[0] || '';
                    const mausPkg = mausArgs.slice(1).join(' ');
                    
                    if (mausCmd === 'help' || mausCmd === '') {
                        response = `maus - package manager (v1.0.0)

usage: maus <command>

commands:
  help              - show this message
  list-packages     - see available packages
  install <pkg>    - install a package
  clue             - get a hint`;
                    } else if (mausCmd === 'list-packages') {
                        response = `available packages:
  ‚ñ∫ rstudio         - interactive data analysis environment
  ‚ñ∫ tidyverse       - data wrangling toolkit
  ‚ñ∫ ggplot2         - visualization library
  ‚ñ∫ love            - unlock special features (requires rstudio)`;
                    } else if (mausCmd === 'install') {
                        const pkg = mausPkg || '';
                        if (pkg === 'rstudio') {
                            response = `installing rstudio...
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%

‚úì rstudio installed successfully!`;
                            rstudioInstalled = true;
                            shouldEnter = true;
                        } else if (pkg === 'love') {
                            response = `error: cannot install 'love' without 'rstudio'
hint: try 'maus install rstudio' first`;
                        } else if (pkg === '') {
                            response = `error: please specify a package to install
usage: maus install <package>
try 'maus list-packages' to see available options`;
                        } else {
                            response = `error: package '${pkg}' not found
try 'maus list-packages' to see what's available`;
                        }
                    } else if (mausCmd === 'clue') {
                        response = `üí° hint: if we could just install software to make sense of all this data...`;
                    } else {
                        response = `maus: unknown command '${mausCmd}'
try 'maus help' for available commands`;
                    }
                } else if (input === 'help') {
                    let helpText = `available commands:
  help          - show this help message
  whoami        - display current user
  date          - show current date and time
  pwd           - print working directory
  ls            - list files
  uname         - system information
  clear         - clear terminal
  clue          - get a hint
  maus          - package manager (try 'maus help')`;
                    if (rstudioInstalled) {
                        helpText += `\n  r             - launch rstudio environment`;
                    }
                    response = helpText;
                } else if (input === 'whoami') {
                    const username = document.getElementById('terminal-username').textContent;
                    response = username;
                } else if (input === 'pwd') {
                    response = '/home/' + document.getElementById('terminal-username').textContent + '/valentine';
                } else if (input === 'ls' || input === 'ls -la' || input === 'dir') {
                    response = `total 3
drwxr-xr-x  2 ${document.getElementById('terminal-username').textContent}  ${document.getElementById('terminal-username').textContent}  4096 Feb 14 12:00 .
drwxr-xr-x  5 ${document.getElementById('terminal-username').textContent}  ${document.getElementById('terminal-username').textContent}  4096 Feb 14 11:30 ..
-rw-r--r--  1 ${document.getElementById('terminal-username').textContent}  ${document.getElementById('terminal-username').textContent}  1337 Feb 14 12:00 love_letter.txt
-rw-r--r--  1 ${document.getElementById('terminal-username').textContent}  ${document.getElementById('terminal-username').textContent}   420 Feb 14 11:45 heart_data.csv
üíï romantic files detected!`;
                } else if (input === 'uname' || input === 'uname -a') {
                    response = `LoveOS 14.2 Valentine-Edition x86_64
Built with ‚ù§Ô∏è for ${document.getElementById('terminal-username').textContent}`;
                } else if (input === 'date') {
                    response = new Date().toString();
                } else if (input === 'clear') {
                    content.innerHTML = '';
                    document.getElementById('terminal-input').value = '';
                    content.parentElement.scrollTop = 0;
                    return;
                } else if (input === 'r') {
                    if (rstudioInstalled) {
                        // Enter R environment
                        document.getElementById('terminal-modal').classList.add('hidden');
                        document.getElementById('r-cli-modal').classList.remove('hidden');
                        document.getElementById('r-input').focus();
                        return;
                    } else {
                        response = `command not found: 'r'
hint: you need to install rstudio first using 'maus install rstudio'`;
                    }
                } else if (input === 'clue') {
                    response = `üí° hint: if we could just install software to make sense of all this data...`;
                } else {
                    response = `command not found: ${input}
type 'help' for available commands`;
                }
                
                // Add response
                if (response) {
                    const responseLine = document.createElement('p');
                    responseLine.textContent = response;
                    responseLine.style.color = '#00ff00';
                    responseLine.style.whiteSpace = 'pre-wrap';
                    content.appendChild(responseLine);
                }
                
                // Clear input
                document.getElementById('terminal-input').value = '';
                
                // Auto-scroll terminal to bottom
                setTimeout(() => {
                    content.scrollTop = content.scrollHeight;
                }, 0);
                
                // Handle R entry after rstudio install
                if (shouldEnter) {
                    setTimeout(() => {
                        document.getElementById('terminal-modal').classList.add('hidden');
                        document.getElementById('r-cli-modal').classList.remove('hidden');
                        document.getElementById('r-input').focus();
                    }, 1500);
                }
            }
        }


        // R challenge state
        let rChallengeStep = 0;
        let heartData = null;
        let correlationCalculated = false;

        function handleRInput(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('r-input').value.trim();
                const inputLower = input.toLowerCase();
                const content = document.getElementById('r-terminal-content');
                
                if (!input) {
                    document.getElementById('r-input').value = '';
                    return;
                }
                
                // Add user input
                const userLine = document.createElement('p');
                userLine.textContent = '> ' + input;
                userLine.style.color = '#d4d4d4';
                content.appendChild(userLine);
                
                // Process R commands
                let response = '';
                let responseClass = 'r-output';
                let shouldProgress = false;
                
                if (inputLower === 'help()' || inputLower === '?') {
                    response = `Available functions:
  load_heart_data()    - Load the romantic dataset
  summary(data)        - View data summary
  names(data)          - View variable names
  plot_hearts()        - Visualize the relationship
  find_correlation()   - Calculate love correlation
  unlock_heart()       - Complete the challenge (requires correlation)
  
üí° Tip: Start by loading the data!`;
                    responseClass = 'r-comment';
                } else if (inputLower === 'load_heart_data()' || inputLower === 'load_heart_data') {
                    heartData = true;
                    rChallengeStep = 1;
                    updateREnvironment('heart_data', 'data.frame [5 √ó 3]');
                    response = `‚úì Loaded heart_data.csv
A romantic dataset with 5 observations of 3 variables:
  - date: Special moments together
  - happiness: Your happiness level (0-10)
  - love_score: Connection strength (0-100)

üíï Type summary(heart_data) to see the details!`;
                    responseClass = 'r-output';
                } else if ((inputLower === 'summary(heart_data)' || inputLower === 'summary(heart_data)') && heartData) {
                    rChallengeStep = Math.max(rChallengeStep, 2);
                    response = `     date             happiness    love_score
 "2024-02-14"     Min:   7.0    Min:   78.0
 "2024-05-20"     1st Qu:8.0    1st Qu:82.0
 "2024-08-15"     Median:9.0    Median:91.0
 "2025-11-01"     Mean:  8.6    Mean:  88.6
 "2026-02-14"     3rd Qu:9.5    3rd Qu:95.0
                  Max:  10.0    Max:   99.0

üí° Notice anything? Try plot_hearts() to visualize!`;
                    responseClass = 'r-output';
                } else if ((inputLower === 'names(heart_data)' || inputLower === 'names(heart_data)') && heartData) {
                    response = `[1] "date"        "happiness"   "love_score"

üí° Three variables capturing our journey together!`;
                    responseClass = 'r-output';
                } else if ((inputLower === 'plot_hearts()' || inputLower === 'plot_hearts') && heartData) {
                    rChallengeStep = Math.max(rChallengeStep, 3);
                    response = `
    üíï Love Score vs Happiness üíï
  100|                      ‚ù§Ô∏è
     |                   ‚ù§Ô∏è
   90|              ‚ù§Ô∏è
     |           ‚ù§Ô∏è
   80|        ‚ù§Ô∏è
     |
   70|_________________________
      7    8    9    10
           Happiness

‚ú® Perfect positive relationship! 
üí° Try find_correlation() to quantify this!`;
                    responseClass = 'r-output';
                } else if ((inputLower === 'find_correlation()' || inputLower === 'find_correlation' || 
                           inputLower === 'cor(heart_data$happiness, heart_data$love_score)') && heartData) {
                    correlationCalculated = true;
                    rChallengeStep = Math.max(rChallengeStep, 4);
                    updateREnvironment('correlation', '0.997');
                    response = `
üíï Correlation Analysis üíï

cor(happiness, love_score) = 0.997

This means: As your happiness grows, our love 
score increases almost perfectly! 

Statistical interpretation:
 - Correlation: 0.997 (nearly perfect!)
 - p-value: < 0.001 (highly significant!)
 - R¬≤: 0.994 (99.4% of variation explained!)

‚ú® You've discovered the secret pattern! ‚ú®
üíå Now use unlock_heart() to reveal the finale!`;
                    responseClass = 'r-output';
                } else if ((inputLower === 'unlock_heart()' || inputLower === 'unlock_heart') && correlationCalculated) {
                    response = `
üîì Unlocking the heart...

The correlation reveals the truth:
  When you smile, my world lights up.
  When you're happy, my love grows stronger.
  We are perfectly correlated. üíï

[1] "You've completed the Love Analytics Challenge!"
[1] "Preparing the final surprise..."`;
                    responseClass = 'r-output';
                    shouldProgress = true;
                } else if ((inputLower === 'unlock_heart()' || inputLower === 'unlock_heart') && !correlationCalculated) {
                    response = `Error: Heart still locked! üîí
Hint: You need to find_correlation() first!`;
                    responseClass = 'r-error';
                } else if (inputLower === 'quit()' || inputLower === 'q()') {
                    document.getElementById('r-cli-modal').classList.add('hidden');
                    document.getElementById('terminal-modal').classList.remove('hidden');
                    document.getElementById('terminal-input').focus();
                    return;
                } else if (!heartData) {
                    response = `Error: No data loaded!
üí° Try load_heart_data() first to begin the challenge`;
                    responseClass = 'r-error';
                } else {
                    response = `Error in eval(expr): object '${input}' not found
Type help() to see available functions`;
                    responseClass = 'r-error';
                }
                
                // Add response
                if (response) {
                    const responseLine = document.createElement('p');
                    responseLine.innerHTML = response.replace(/\n/g, '<br>');
                    responseLine.className = responseClass;
                    content.appendChild(responseLine);
                }
                
                // Clear input
                document.getElementById('r-input').value = '';
                
                // Auto-scroll to bottom
                setTimeout(() => {
                    content.scrollTop = content.scrollHeight;
                }, 0);
                
                // Progress to finale if unlock command used
                if (shouldProgress) {
                    setTimeout(() => {
                        document.getElementById('r-cli-modal').classList.add('hidden');
                        showFinale();
                    }, 2000);
                }
            }
        }

        function updateREnvironment(varName, varValue) {
            const envContent = document.getElementById('r-environment');
            const newItem = document.createElement('div');
            newItem.className = 'rstudio-env-item';
            newItem.innerHTML = `<span class="rstudio-env-name">${varName}</span>: ${varValue}`;
            envContent.appendChild(newItem);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                checkPassword();
            }
        }

        function showError() {
            // Show XP error modal for level 1
            if (currentLevel === 0) {
                document.getElementById('xp-error-modal').classList.remove('hidden');
            } else {
                // Regular error for other levels
                const errorMsg = document.getElementById('error-msg');
                errorMsg.textContent = 'incorrect answer. try again!';
                errorMsg.classList.add('show');
                const input = document.getElementById('password-input');
                input.classList.add('success-pulse');
                setTimeout(() => {
                    errorMsg.classList.remove('show');
                    input.classList.remove('success-pulse');
                }, 1500);
            }
        }

        function closeXPError() {
            document.getElementById('xp-error-modal').classList.add('hidden');
            document.getElementById('password-input').focus();
        }

        function transitionToNextLevel() {
            const container = document.getElementById('levels-container');
            container.classList.add('fade-out');
            setTimeout(() => {
                currentLevel < CONFIG.levels.length && renderLevel();
                container.classList.remove('fade-out');
            }, 600);
        }

        function transitionToFinale() {
            document.getElementById('hunt-state').classList.remove('active');
            showFinale();
        }

        // Finale logic
        function showFinale() {
            document.getElementById('finale-state').classList.add('active');
            triggerConfetti();
        }

        function populateLoveLetter() {
            document.getElementById('love-letter').textContent = CONFIG.loveLetter;
        }

        function sendVirtualHug() {
            alert('virtual hug sent!\n\nyou mean everything to me. happy valentine\'s day!');
            triggerConfetti();
        }

        // Confetti effect
        function triggerConfetti() {
            const colors = ['#c9929d', '#d4a5b4', '#e8c8d0', '#fde7e7', '#fdf8f5'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti confetti-active';
                confetti.style.left = Math.random() * window.innerWidth + 'px';
                confetti.style.top = '-10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.width = Math.random() * 15 + 5 + 'px';
                confetti.style.height = confetti.style.width;
                confetti.style.animation = `confetti-fall ${Math.random() * 2 + 2}s ease-out forwards`;
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Generate floating hearts, flaming hearts, and sparkles
        function generateHearts() {
            const container = document.getElementById('hearts-container');
            const hearts = ['üíï', '‚ù§Ô∏è‚Äçüî•', 'üçë', 'üê≠', '‚ú®'];
            
            // Spawn gradually instead of all at once
            let spawnCount = 0;
            const spawnInterval = setInterval(() => {
                if (spawnCount < 80) {
                    createHeart(container, hearts);
                    spawnCount++;
                } else {
                    clearInterval(spawnInterval);
                }
            }, 100);
            
            // Continuously spawn new hearts every 300ms
            setInterval(() => {
                createHeart(container, hearts);
            }, 300);
        }
        
        function createHeart(container, hearts) {
            const heart = document.createElement('div');
            heart.className = 'heart-float';
            heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
            
            // Spawn from bottom of screen
            const startX = Math.random() * window.innerWidth;
            const startY = window.innerHeight + 20; // Slightly below viewport
            heart.style.left = startX + 'px';
            heart.style.top = startY + 'px';
            
            // Random animation duration between 6-12 seconds
            const duration = Math.random() * 6 + 6;
            heart.style.animationDuration = duration + 's';
            
            // Random size variation
            const sizeVariation = Math.random() * 0.6 + 0.7;
            heart.style.fontSize = (1.2 * sizeVariation) + 'rem';
            
            // Store position and velocity data
            heart.dataset.startX = startX;
            heart.dataset.startY = startY;
            heart.dataset.duration = duration;
            heart.dataset.velocityX = (Math.random() - 0.5) * 0.3; // Horizontal drift velocity
            heart.dataset.velocityY = -1.2; // Upward velocity (faster to reach top)
            heart.dataset.startTime = Date.now();
            
            container.appendChild(heart);
            
            // Remove after animation completes
            setTimeout(() => {
                heart.remove();
            }, duration * 1000);
        }
        
        // Mouse/Touch interaction - hearts react and move away
        let interactionX = window.innerWidth / 2;
        let interactionY = window.innerHeight / 2;
        
        // Mouse tracking
        document.addEventListener('mousemove', (e) => {
            interactionX = e.clientX;
            interactionY = e.clientY;
        });
        
        // Touch tracking for mobile
        document.addEventListener('touchmove', (e) => {
            if (e.touches.length > 0) {
                interactionX = e.touches[0].clientX;
                interactionY = e.touches[0].clientY;
            }
        }, { passive: true });
        
        // Update heart positions based on mouse
        function updateHeartRepulsion() {
            const hearts = document.querySelectorAll('.heart-float');
            
            hearts.forEach(heart => {
                const startX = parseFloat(heart.dataset.startX);
                const startY = parseFloat(heart.dataset.startY);
                const duration = parseFloat(heart.dataset.duration);
                const startTime = parseFloat(heart.dataset.startTime);
                
                const elapsed = (Date.now() - startTime) / 1000;
                const progress = elapsed / duration;
                
                if (progress > 1) {
                    return;
                }
                
                let velocityX = parseFloat(heart.dataset.velocityX);
                let velocityY = parseFloat(heart.dataset.velocityY);
                
                // Calculate current position
                let currentX = startX + velocityX * elapsed * 80;
                let currentY = startY + velocityY * elapsed * 80;
                
                // Distance to mouse/touch
                const dx = currentX - interactionX;
                const dy = currentY - interactionY;
                const dist = Math.hypot(dx, dy);
                const repelDistance = 220;
                
                if (dist < repelDistance && dist > 0) {
                    // Calculate repulsion direction
                    const angle = Math.atan2(dy, dx);
                    const force = (repelDistance - dist) / repelDistance;
                    
                    // Modify velocity based on repulsion (change direction, not just position)
                    const repelStrength = force * 1.5;
                    velocityX += Math.cos(angle) * repelStrength * 0.015;
                    velocityY += Math.sin(angle) * repelStrength * 0.015;
                    
                    // Store updated velocity
                    heart.dataset.velocityX = velocityX;
                    heart.dataset.velocityY = velocityY;
                    
                    // Recalculate position with new velocity
                    currentX = startX + velocityX * elapsed * 80;
                    currentY = startY + velocityY * elapsed * 80;
                }
                
                const offsetX = currentX - startX;
                const offsetY = currentY - startY;
                
                heart.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
            });
            
            requestAnimationFrame(updateHeartRepulsion);
        }
        
        updateHeartRepulsion();

        // Start the app
        window.addEventListener('load', init);
    </script>
</body>
</html>
